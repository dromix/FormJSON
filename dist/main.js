(()=>{"use strict";var t=function(){return(t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e=function(){function e(){}return e.prototype.convert=function(e){return JSON.parse(e).map((function(e){if(e.type.startsWith("header"))return t(t({},e),{type:"title",tag:"h"+e.type.charAt(e.type.length-1)});if("input"===e.type){var n=e.fieldType,r=e.reference,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["fieldType","reference"]);return t(t({},o),{type:"input-"+n,name:r})}return"CTA"===e.type?t(t({},e),{type:"submit"}):void 0}))},e}(),n=function(){function t(){this.form=document.createElement("form"),this.form.setAttribute("action","#")}return t.prototype.addTitle=function(t){var e=t.tag,n=void 0===e?"h1":e,r=t.label,o=void 0===r?"":r,i=document.createElement(n);return i.innerText=o,this.form.appendChild(i),this},t.prototype.addInput=function(t){var e=t.input,n=t.label;return n&&this.form.appendChild(n),this.form.appendChild(e),this},t.prototype.addSubmit=function(t){void 0===t&&(t="Submit");var e=document.createElement("button");return e.setAttribute("type","submit"),e.innerText=t,this.form.appendChild(e),this},t.prototype.build=function(){return this.form},t}(),r=function(){function t(t,e){this.label=t,this.name=e}return t.prototype.render=function(){var t=document.createElement("input"),e=document.createElement("label");return t.setAttribute("type","text"),t.setAttribute("name",this.name),this.name&&e.setAttribute("for",this.name),e.innerText=this.label,{input:t,label:e}},t}(),o=function(){function t(t,e){this.label=t,this.name=e}return t.prototype.render=function(){var t=document.createElement("input"),e=document.createElement("label");return t.setAttribute("type","number"),t.setAttribute("name",this.name),this.name&&e.setAttribute("for",this.name),e.innerText=this.label,{input:t,label:e}},t}(),i=function(){function t(){this.getKeyValue=function(t){return function(e){return t[e]}}}return t.prototype.createInput=function(e,n,r){return void 0===n&&(n=""),void 0===r&&(r=""),new(this.getKeyValue(t.list)(e))(n,r).render()},t.list={text:r,number:o},t}();function u(t){var e=t.type,n=void 0===e?"text":e,r=t.label,o=void 0===r?"":r,u=t.name,a=void 0===u?"":u;return(new i).createInput(n,o,a)}var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=function(){function t(){}return t.prototype.setBuilder=function(t){return this.builder=t,this},t.prototype.make=function(t){var e=this;t.forEach((function(t){switch(t.type){case"title":return e.builder.addTitle({tag:t.tag,label:t.label});case"input-number":return e.builder.addInput(a({},u({type:"number",label:t.label,name:t.name})));case"input-text":return e.builder.addInput(a({},u({type:"text",label:t.label,name:t.name})));case"submit":return e.builder.addSubmit(t.label);default:throw new Error("You should provide correct form settings")}}))},t}(),l=function(){function t(){this.connected=!1}return t.getInstance=function(){return t.INSTANCE||(t.INSTANCE=new t),t.INSTANCE},t.prototype.onSubmit=function(t){t.preventDefault();var e=new FormData(this.form),n=JSON.stringify(Object.fromEntries(e.entries()));console.log(n,e,t),alert(1),function(t,e){return n=this,r=void 0,i=function(){return function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(t){switch(t.label){case 0:return[4,fetch("http://localhost:3000/posts",{method:"POST",headers:{"Content-type":"application/json"},body:e})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}}))},new((o=void 0)||(o=Promise))((function(t,e){function u(t){try{c(i.next(t))}catch(t){e(t)}}function a(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(u,a)}c((i=i.apply(n,r||[])).next())}));var n,r,o,i}(0,n).then((function(t){console.log(t)}))},t.prototype.connectForm=function(t){this.connected||(this.connected=!0,this.form=t,this.form.addEventListener("submit",this.onSubmit),console.log("Connection successful"),console.log(this.form))},t.prototype.reset=function(){this.form.removeEventListener("submit",this.onSubmit),this.connected=!1},t}();const s=new(function(){function t(t,e,n,r){this.convertor=t,this.formBuilder=e,this.director=n,this.singleton=r}return t.prototype.makeForm=function(t){var e=this.convertor.convert(t),n=this.formBuilder;this.director.setBuilder(n),this.director.make(e);var r=n.build();document.querySelector("#app").appendChild(r),this.singleton.connectForm(document.querySelector("#app form"))},t.prototype.clearData=function(){this.singleton.reset()},t}())(new e,new n,new c,l.getInstance());var p=JSON.stringify([{type:"header-level-2",label:"Name yourself"},{type:"input",fieldType:"number",label:"Your name",reference:"name"},{type:"input",fieldType:"text",reference:"name2"},{type:"CTA",label:"This is it"}]);s.makeForm(p)})();
//# sourceMappingURL=main.js.map